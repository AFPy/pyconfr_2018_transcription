 


06_Faire de la domotique libriste avec Python Arthur Lutz


14:53:000645:000645_0 : 14:51:59:125: Picon donc aujourd'hui je vous présente et donc faire de la domotique libriste avec avec Python du coup c'est une présentation d'un petit écosystème que j'ai découvert récemment que je trouve plutôt sympathique petit disclaimer donc pour commencer donc moi je travaille ciel Audilab parce que je vais vous présenter ici c'est parce que je fais
14:53:000646:000646_3 : 14:52:28:425: Justement c'est une des choses qui moi me part importante dans ce genre de projet je sais pas s'il y a des gens qui était la la présentation tout à l'heure de maths sur le full sur le fil remote je l'ai vu dans une autre conférence et je trouve qu'il y a un pointeur Quimiac s'appelle le projet perso numéro 42 une personne qui a présenté sa Paris web . 3
14:54:000647:000647_4 : 14:52:50:543: C'est ça peut être intéressant ou ça peut être important de en dehors de son travail d'avoir des projets qui sont pas sous la contrainte de la production qui sont là d'une exploration d'une techno on a le temps on le fait on le fait on a pas de deadline on a pas quelqu'un qui nous dit moi là il faut il faut améliorer truc exetera donc ça . 4
14:54:000648:000648_1 : 14:53:14:717: De projet perso qui sont pas de la prod qui sont en mode obi qui sont en mode auto hébergement donc une des choses avec la domotique sont peut-être que ça résonne pour certains de vos des choses de surveillance de sécurité de . 1
14:54:000649:000649_2 : 14:53:31:860: C'est qui qui sont connectés à du cloud exetera là en fait alors moi je viens pas trop de cette approche la et justement là c'est pour c'est pour vous montrer qu'on peut faire des choses à prendre comment ça fonctionne aussi via un écosystème et un écosystème python voilà ce qui en partie me permets de le faire et ça si vous voulez rediscuter de ça en dehors c'est cool sealogis la . 2
14:54:000650:000650_3 : 14:53:56:978: Farciennes voilà petit clin d'œil à ma boîte qui permet ce genre de chose . 3
14:55:000651:000651_4 : 14:54:04:018: Donc du coup moi je m'appelle Arthur Lutz comme je viens de le dire travaille aussi chez logilab je fais des trucs en dehors peux me trouver sur Twitter et pour arrêter les silos donner propriétaire on peut aussi une trouver dans le fait divers sur sur mastodonte . 4
14:55:000652:000652_1 : 14:54:21:172: Donc du coup qu'est-ce que je vais vous présenter aujourd'hui je vous présenter un du sexe appelle home assistance donc du coup la domotique un des principes c on a un certain nombre d'entrées de input de capteurs dans sa maison on a l'électroménager on a des mesure d'énergie on va pouvoir allumer les lumières et un des lumières allumées de chauffage allumé la VMC à tout . 1
14:55:000653:000653_2 : 14:54:46:313: Autour de l'automatisation et donc j'étais un peu déçu des différents projets livre que j'avais essayé de . 2
14:55:000654:000654_3 : 14:54:47:313: Et au cours du temps et puis il est apparu ou Messi stunt écris en python je me dis avait déjà c voilà c'est ce que c'est ce que je fais au boulot donc ça c'est ce que je pourrais mettre les mains dans le code exetera et donc c'est un système open source de d'automatisation domestique . 3
14:56:000655:000655_4 : 14:55:14:624: Local et la vie privée au premier plan en avoir que c'est ça c'est le postulat de base en pratique dans dans les composants d'avoir que c'est pas forcément . 4
14:56:000656:000656_1 : 14:55:25:759: Aussi mais c'est pas forcément ce qui apparaît en premier voilà et donc CCD bidouilleur des enthousiaste et ça tombe sur les plateformes low-tech donc des plateformes légère type Raspberry Pi . 1
14:56:000657:000657_2 : 14:55:40:896: Au-delà de cet écosystème et de sa fonctionnalité le . 2
14:56:000658:000658_3 : 14:55:49:660: Je voulais a présenté à la paille conne c'est donc il a dû python3 dedans acetone que le projet date un peu ils ont dit direct on est en piston 3 il y a de la Sinne caillou apparemment c'est la mode . 3
14:56:000659:000659_4 : 14:56:01:786: Tu comprendras il a une petite tendance . 4
14:57:000660:000660_1 : 14:56:04:927: Il y a des choses intéressantes en terme de ou en termes de gestion de dépendance on va voir que dans mes système son à une notion de composants on va pouvoir configurer un composant . 1
14:57:000661:000661_2 : 14:56:17:061: Qui va aller récupérer de la météo et en fait une fois qu'on a configurer le composant il va au démarrage domesystem récupérer dynamiquement les modules et dépendance donc il a besoin il y a des petites choses comme ça que je trouve sympathique et puis si vous voulez . 2
14:57:000662:000662_3 : 14:56:36:201: Qui peut être intéressant donc on des vision du pepite ils ont du tox parce que apparemment top c'est amour et donc il faut en faire . 3
14:57:000663:000663_4 : 14:56:47:324: Et puis après il y a des choses peut-être un peu moins accessible donc il y a volume tout ce qui est une librairie de validation de d'entrée de données donc voilà ou pareil c'est dans mon point de vue des bonnes pratiques et il y a du détail pin's donc c'est Duty pages qui qui permet de documenter quel type sont attendus dans dans dans le code Python . 4
14:58:000664:000664_1 : 14:57:13:468: Allô celle qui s'appelle mon petit thaï qui de mémoire était développée chez Instagram initialement donc voilà donc il y a de la Sinne caillou il y a du piston 3 il y a des tests seras là il y a un écosystème et en tout cas la documentation développement ai assez sympathique et et on va voir aussi que si vous voulez . 1
14:58:000665:000665_2 : 14:57:34:614: Pierre à l'édifice dans les composants en fait les composants peuvent être très très variés ça peut être vraiment un tout petit truc qui est assez spécifique à votre visage et donc là dessus l'apporter est relativement ouverte pour pour contribuer . 2
14:58:000666:000666_3 : 14:57:50:755: Le matériel . 3
14:58:000667:000667_4 : 14:57:53:877: Ça peut tourner sur sur ce qu'on appelle les single board computer donc un single board computer c'est un truc de la taille d'une carte de crédit ou voire plus petit parement les chinois sont beaucoup plus fort que nous arriver actualité . 4
14:58:000668:000668_1 : 14:58:13:004: 0 avant la Raspberry Pi c'était plutôt je m'en de la taille d'un portefeuille . 1
14:59:000669:000669_2 : 14:58:21:134: Et donc voilà là maintenant on est passé à ce type de format d'ailleurs donc du coup la la démo se fera sur celui-là que j'ai allumé toute à l'heure sur lequel on y reviendra et donc du coup ça peut tourner sur du matériel qui est assez léger qui consomme pas énormément mais ça peut tourner aussi sur un vieux portable que vous avez . 2
14:59:000670:000670_3 : 14:58:41:260: Une vraie philosophie autour de l'hôtel et de faire des choses avec du matériel existant . 3
14:59:000671:000671_4 : 14:58:49:851: Dès que partie 11 allée du Python 3 sur une machine ou pouvez faire tourner sa là-dessus . 4
14:59:000672:000672_1 : 14:58:56:993: Exemple alors c c pas chez moi chez moi c'est pas c'est pas aussi propre que ça c'est pas Calais du tout comme ça c'est celui beaucoup plus le bordel mais donc voilà donc ça c'est quelqu'un qui a fait un beau boîtier . 1
14:59:000673:000673_2 : 14:58:56:993: Un logo msn . 2
15:00:000674:000674_3 : 14:59:12:331: Donc du coup canton de faire de la domotique on va avoir des entrées des sorties et donc dans les entrées la la petite démo que que je vais vous montrer ça va être avec des capteurs comme ça donc ça c'est les capteurs de température et d'humidité . 3
15:00:000675:000675_4 : 14:59:29:471: Un peu cher donc il y a le dht11 et le dht22 suis là il fait . 4
15:00:000676:000676_1 : 14:59:37:597: Il a une sensibilité un peu plus fine voilà après voilà l'écosystème après dans l'électronique et très vaste temps ça peut être des sondes de distance des sondes de températures descendent audio des capteurs de qualité de l'air ce genre de chose . 1
15:01:000677:000677_0 : 14:59:57:734: Son de l'unité si j'avais j'avais croisé un project intéressant d'une personne qui se soucier du bien-être de ses parents qui était vieillissant et qui plutôt que d'avoir un gros système de domotique hyper compliqué avait juste mis des petits capteur de luminosité dans l'ensemble de son logement et du coup ça lui permettait
15:01:000678:000678_3 : 15:00:18:899: Se lever bien de matin et aller dans la cuisine pour prendre son petit déjeuner exetera et en tout cas son son système Simplice de détection de est-ce que est-ce que ça va c'est c'était bah il se déplacer d'une salle à une autre et si jamais il est pas allé aux toilettes si jamais il est pas allé dans la cuisine c'est que c'est qui a un problème il faut y aller . 3
15:01:000679:000679_4 : 15:00:38:007: Aussi astucieuse de son du là on est pas obligé de sortir une grosse usine à gaz connecter au Cloud et compagnie . 4
15:01:000680:000680_1 : 15:00:44:684: En terme de d'action du coup en fait on va voir les capteurs Mehdi décès après on va pouvoir potentiellement agir sur l'environnement donc allumer des choses étant des choses exetera si vous voulez commencer une des choses les plus accessibles son pour éviter de cramer votre maison plutôt que de faire des relais en éléctronique vous-même une des choses avec lequel vous pouvez commencer c'est . 1
15:01:000681:000681_2 : 15:01:07:827: Prise télécommandée qui sont accessibles dans le commerce qui sont relativement peu cher avec une petite télécommande comme ça et donc la radio fréquence qui est utilisé pour communiquer entre la télécommande est la prise utilisant truc s'appelle LPD 433 c'est bien connu donc le 433 mégahertz donc c'est des trucs sont pas de chiffrement . 2
15:02:000682:000682_3 : 15:01:29:980: Pour les portails ce genre de truc et donc du coup ici . 3
15:02:000683:000683_4 : 15:01:35:137: Ça c'est pas de moi ou en fait on a le . 4
15:02:000684:000684_1 : 15:01:35:137: Une fois que je les ai montré je peux le faire tourner sur que voyez donc le récepteur dans l'émetteur et le récepteur . 1
15:02:000685:000685_2 : 15:01:49:449: On appuie sur le bouton on capte les codes qui passe et puis du coup on peut les réutiliser pour simuler le fait qu'on utilise la télécommande et donc c c un système qui va déclencher c'est qui va déclencher ses actions la . 2
15:02:000686:000686_3 : 15:02:05:020: Ça ça va se voir un si jamais ça revient avec un truc en moins donc je laisse les passer donc voilà donc pour pour actionner chose on va utiliser ce genre de chose donc voilà . 3
15:03:000687:000687_4 : 15:02:19:164: Une prise lambda et du coup alors puisque je vais sur brûlé la maison c'était important c'est rigolo de faire joujou mais Bruson c'est beaucoup . 4
15:03:000688:000688_1 : 15:02:29:487: C'est juste que ces trucs-là normal on passe par des procédures de sécurité qui permet de faire en sorte que ça soit relativement c . 1
15:04:000689:000689_2 : 15:02:38:407: Donc du coup dans le une des choses qui m'a pas mal plus dans l'écosystème remets système c'est quand vous allez sur la page de composants vous avez donc 11000 miles 1200 . 2
15:04:000690:000690_3 : 15:02:55:539: Si vous utilisez des logiciels libres si vous utilisez des services reconnecter exetera vous allez très prenant les retrouver la danse donc là ils ont des composants qui sont featured c j'en reviens mon ma petite remarque de salaire sur le côté previsurf et là il y a quelqu'un peut propriétaire je vous recommanderai pas forcément . 3
15:04:000691:000691_4 : 15:03:22:669: Moi ma liste elle ressemble plutôt à ça donc ça c'est les composants que j'ai un petit peu essayé donc j'ai de la collecte de mesure énergétique chez moi qui utilise Emon CMS qui a une plate-forme de collecte de mesure énergétique en logiciel donc que j' auto héberge les Raspberry Pi donc il y a des composants pour allumer éteindre sur des sur les ports input et output . 4
15:04:000692:000692_1 : 15:03:47:795: Du boudin il y a des choses intéressantes comme on peut brancher un fichier en Open Data qui de gtfs donc c'est un format pour décrire les transports dans sa vie non plutôt que si votre ville elle publie les passages de tram ou de métro bus exetera potentiellement vous pouvez les mettre dans mes système T il valait voulu dire moi ce qui m'intéresse c'est le trajet de . 1
15:05:000693:000693_2 : 15:04:10:951: À mon boulot et du coup mais si l'un de vous dire le bus 6 place dans 3 minutes exetera tout ça en offline sans avoir aller taper dans une API ou ce genre de chose elle a des trucs avec des services de qualité de l'air Kodi Media Player speedtest avec cette . 2
15:05:000694:000694_3 : 15:04:28:071: Appelle le compteur de temps voilà il y a de l'Arduino je fais de l'impression 3D donc il y a octoprint enfin voilà on pourra y revenir cette liste aller hyper longues je vous encourage à la voir si jamais vous voulez faire du vin dans le cadre de votre boulot il y a une partie sur system monitoring . 3
15:05:000695:000695_4 : 15:04:47:201: Ça peut se brancher aussi sur de la supervision temps là si si si c'est le monitoring qui vous intéresse il y a des trucs aussi là-dedans comment ça s'installe . 4
15:06:000696:000696_1 : 15:04:56:317: Méthode il y a une dispo de s'appelle ACO qui est basé sur Buildroot 2 ans il y a du docteur et c'est encore le cas mais il y a un truc s'appelle résine qui est dedans qui en résine OS si jamais vous voulez vous intéresser à l'Internet des Objets résine a des choses très intéressantes en terme de déploiement continu diplôme pour l'internet des objets . 1
15:06:000697:000697_2 : 15:05:22:439: Technicentre j'espère intéressant bien qui est donc une distribution de Romain système basé sur raspbian race bien de ces la version de Debian orienter pour Raspberry Pi voilà et puis si vous voulez . 2
15:06:000698:000698_3 : 15:05:40:575: Je vais passer rapidement c'était pour faire genre y a des trucs d'architecture technique . 3
15:06:000699:000699_4 : 15:05:41:575: Un truc et classe quand même s'il y a un bus d'événements au milieu au boulot nous on fait du sol ça qui a un bus d'événements et c'est vachement bien et . 4
15:06:000700:000700_1 : 15:05:42:575: Événement donc pareil c'est techniquement il y a des choses qui sont très bien fichu . 1
15:07:000701:000701_2 : 15:06:04:057: Ton son code c'est tricher donc du coup il y a un bout de code qui est bien évidemment et Didier et donc du coup je vais en plus . 2
15:07:000702:000702_3 : 15:06:17:201: Ce qu'il est un peu plus lisible . 3
15:07:000703:000703_4 : 15:06:26:060: Du coup voilà il y a des hauts fait des propriétés au fait ils ont donc là c'est c'est la modélisation d'un switch vous avez une méthode pour l'allumer une méthode pour l'éteindre et voilà donc tout cassé il y a du code ça y est . 4
15:07:000704:000704_1 : 15:06:43:204: Enterrement terre façon qui a une jolie interface web qui se branche dessus là on a quelques exemples donc ça vient de la documentation si jamais vous êtes fan de géolocalisation ce qui est pas trop mon cas il y a il y a des cartes vous pouvez déclencher des actions en fonction de vous vous êtes pareil là si vous faites de la géolocalisation auto héberger il y a des composants . 1
15:08:000705:000705_2 : 15:07:04:339: Sans passer par nos amis les gars femme il y a des choses donc des dashboard pour quand ça fait des mesures avec du numéraire il y en a d'autres pour des mesures qui sont plus des états donc absents présents . 2
15:08:000706:000706_3 : 15:07:20:575: Qui représente la météo à ce moment-là exetera ici on a un exemple d'un boudin interface pour actionner donc des switch donc pour allumer allumer la lumière dans la chambre allumer le radiateur ce genre de chose . 3
15:08:000707:000707_4 : 15:07:36:709: Et du coup je peux vous montrer une demande en tout à l'heure en fait j'ai brancher une Raspberry Pi zéro la sur lequel je viens de m'installer . 4
15:08:000708:000708_1 : 15:07:44:848: Je suis en fait j'ai souder un DHCP 11 22 je sais plus qui du coup vu l'autre jour là je suis passé dans la salle il est super chaud Super U midi est-ce que est-ce que vous êtes chaud . 1
15:08:000709:000709_2 : 15:07:58:997: C'est l'effet des mois . 2
15:08:000710:000710_3 : 15:08:02:826: Donc du coup . 3
15:08:000711:000711_4 : 15:08:09:950: Comment . 4
15:09:000712:000712_1 : 15:08:15:087: Donc du coup voilà j'ai j'ai le . 1
15:09:000713:000713_2 : 15:08:23:227: Interface web Guillaume Assystem plaquer qui est juste en qui est juste en local alors j'ai pas mis où j'étais il y a un journal il y a un historique des différentes valeurs et une des choses que je voulais vous montrer du coup c'est le DHT senso . 2
15:11:000714:000714_3 : 15:08:38:367: Donc est-ce qu'il fait chaud 24 degrés bon c'est pas calibrées donc du coup c'est pas forcément très très très adapté mais du coup voilà on a la courbe de température qui relevé par ce truc là et la cour d'humidité un d autre que j'avais activer dans la configuration . 3
15:11:000715:000715_4 : 15:08:57:509: Va sur les Raspberry Pi zéro W donc celle avec le wifi vous avez aussi une plus une puce Bluetooth et donc tout cela qui ont des choses qui montre des des informations sur votre téléphone . 4
15:11:000716:000716_1 : 15:09:11:638: Heure de poche en faites votre votre Bluetooth scan le . 1
15:11:000717:000717_2 : 15:09:15:788: Qui a des objets et donc je l'ai allumé toute à l'heure . 2
15:11:000718:000718_3 : 15:11:02:237: Vous êtes à la maison c'est bon vous sentez à la maison . 3
15:11:000719:000719_4 : 15:11:08:111: J'ai pas encore mis le truc qui dit bonjour bienvenue chez toi . 4
15:11:000720:000720_1 : 15:11:14:245: Voilà . 1
15:11:000721:000721_2 : 15:11:19:386: Du coup voilà . 2
15:12:000722:000722_3 : 15:11:21:515: Pour la démo dans dans les dans les choses que je trouve intéressante aussi techniquement avec le système SILLIA cette . 3
15:12:000723:000723_0 : 15:11:22:515: Donc resin.io . 4
15:12:000724:000724_1 : 15:11:33:803: Regarder en gros on pousse en plus du code général images docker qui ensuite tiré par par le par le device ils ont fait une implémentation de docker qui est un peu plus légère s'appelle balena et puis ensuite on a des mécanismes assez astucieux sur le fait d'avoir . 1
15:12:000725:000725_2 : 15:11:53:943: On device qui va aller ensuite appliquer la modification logiciel sur des sur des device qui sont moins costaud sont pas forcément du wifi ou ce genre de chose donc là en fait si vous faites micropython du micro bit je sais que c'était dans le programme du truc j'ai pas trop avoir le temps d'en parler mais du coup vous pouvez modifier du Code le pouce et il le télécharge sur une . 2
15:13:000726:000726_3 : 15:12:17:082: Et ensuite il le flash sur la micropython sur la micro vite il y a des choses rigolotes à faire de ce point de vue-là si si c'est des choses qui vous intéresse . 3
15:13:000727:000727_0 : 15:12:26:682: Je voulais parler python aussi dans la domotique il y a aussi donc la collecte de ces sonde si on vient à cette histoire de courbe là moi j'aime bien les stocker dans d'autres dans d'autres
15:13:000728:000728_1 : 15:12:42:842: Coucou faut installer du graphite IPI avec du graphite carbone . 1
15:13:000729:000729_2 : 15:12:49:947: Carbone c'est pour recevoir les données l'appareil en fait dans le système qui a un petit un petit bout de configuration qui dit salut je veux faire du jeu faire du graphite . 2
15:14:000730:000730_3 : 15:12:59:077: Il va pousser les donner toutes les données qui recueille donc vous êtes présents vous n'êtes pas présent à la température enfin tu laisses qui considère comme un enfant un capteur et il va aller le pousser dans dans dans carbone on peut ensuite le récupérer les données depuis graphique pour les afficher par exemple dans un dashboard grafana . 3
15:14:000731:000731_4 : 15:13:16:205: C'est des choses que j'aime bien faire ensuite on a . 4
15:14:000732:000732_1 : 15:13:36:328: Est-ce que c'est une conscience python je me suis dit pour pas voilà trop brusquer les gens fait dans notre aide on peut avoir une python3 function donc c'est un module Javascript is un peu dégueu mais mais en tout cas si vous voulez faire d'une Audrey et que vous voulez que c'est possible donc c'est de la programmation visuel . 1
15:15:000733:000733_2 : 15:13:57:466: Voilà donc pas pareil c'est quand qu'on se voit ai marre de faire du code en ligne de commande dans un terminal exetera au boulot va des fois c'est rigolo d'aller faire la programmation visuel en disant j'étais Limp où tu passes par tel fonction en plus c'est même pas ce que je fais . 2
15:15:000734:000734_3 : 15:14:16:591: Ils ont voilà il y a des sorties ça ça permet de dernier rigoler pour finir un dé truqué intéressant dans cet écosystème menacé mqtt donc mqtt c'est le mai section Intersport donc on peut activer un module mm dans . 3
15:15:000735:000735_4 : 15:14:37:741: Système s'il utilise HB mqtt as in Cayo . 4
15:15:000736:000736_1 : 15:14:43:735: Et puis si vous voulez faire un vrai serveur mqtt mosquitto comment utiliser il y a plein de librairie en python qui font du mqtt et puis ensuite si vous avez d'autres qui savent envoyer des informations sur mqtt home assistant l'échoppe comme des switch . 1
15:16:000737:000737_2 : 15:14:44:735: Tout ça . 2
 
